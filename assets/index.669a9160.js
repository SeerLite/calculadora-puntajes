const d=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function e(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerpolicy&&(r.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?r.credentials="include":o.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(o){if(o.ep)return;o.ep=!0;const r=e(o);fetch(o.href,r)}};d();function c(n,t,e){return Math.min(Math.max(n,t),e)}function u(n){const t=["bg-gray-400","text-green-900"];n.classList.add(...t),setTimeout(()=>n.classList.remove(...t),150)}function m(n){let t=0;for(const e of n)t+=e.puntaje*e.porcentaje/100;return t}function l(n){for(const o of n){const r=100-n.reduce((i,p)=>i+p.porcentaje,0);if(r>=0||o.porcentaje+r>=0){o.porcentaje+=r;break}else o.porcentaje=0}const t=m(n),e=document.getElementById("puntaje-ponderado");if(!e)throw new Error("Elemento #puntaje-ponderado no existe");const a=String(Math.floor(t*10)/10);e.innerText!==a&&(e.innerText=a,u(e))}class f{constructor(t,e){this.elementos={puntaje:t,porcentaje:e}}get puntaje(){return c(Number(this.elementos.puntaje.value),150,850)}set puntaje(t){const e=String(c(t,150,850));this.elementos.puntaje.value!==e&&(this.elementos.puntaje.value=e,u(this.elementos.puntaje))}clamp_puntaje(){this.puntaje=this.puntaje}get porcentaje(){return c(Number(this.elementos.porcentaje.value),0,100)}set porcentaje(t){const e=String(c(t,0,100));this.elementos.porcentaje.value!==e&&(this.elementos.porcentaje.value=e,u(this.elementos.porcentaje))}clamp_porcentaje(){this.porcentaje=this.porcentaje}}function j(){const n=["nem","ranking","lenguaje","matematicas","ciencias"],t=[];for(const e of n){const a=document.getElementById(`puntaje-${e}`),o=document.getElementById(`porcentaje-${e}`);if(!a||!o)throw new Error(`Uno de los inputs de materia ${e} no existe`);t.push(new f(a,o))}return t}const s=j();s.reverse();l(s);for(const n of s){const t=n.elementos.porcentaje,e=n.elementos.puntaje;t.addEventListener("focus",t.select),t.addEventListener("input",a=>{s.splice(s.indexOf(n),1),s.push(n),t.value=t.value.slice(0,3),t.value.length>=3&&n.clamp_porcentaje(),l(s)}),t.addEventListener("blur",a=>{n.clamp_porcentaje()}),e.addEventListener("focus",e.select),e.addEventListener("input",a=>{e.value=e.value.slice(0,3),e.value.length>=3&&n.clamp_puntaje(),l(s)}),e.addEventListener("blur",a=>{n.clamp_puntaje()})}
